name: CI
on: [push, pull_request]
jobs:
  smoke:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-go@v5
        with: { go-version: '1.22' }
      - run: |
          if [ -d cmd/quantum-forge ]; then (cd cmd/quantum-forge && go build ./...); fi
          if [ -d cmd/quantum-forge-monitor ]; then (cd cmd/quantum-forge-monitor && go build ./...); fi
      - uses: actions/setup-python@v5
        with: { python-version: '3.11' }
      - run: |
          if [ -f quantum/adapter/qaoa_reduce.py ]; then python -m py_compile quantum/adapter/qaoa_reduce.py; fi
      - uses: actions/setup-node@v4
        with: { node-version: '20' }
      - run: |
          npm install
          ./scripts/health-check.sh || echo "Health check completed with warnings"
